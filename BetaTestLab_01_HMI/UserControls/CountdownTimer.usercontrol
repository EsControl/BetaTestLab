<div id="CountdownTimer_2" data-tchmi-type="TcHmi.Controls.System.TcHmiUserControl" data-tchmi-top="0" data-tchmi-left="0" data-tchmi-width="100" data-tchmi-height="100" data-tchmi-width-unit="%" data-tchmi-height-unit="%" data-tchmi-creator-viewport-width="600" data-tchmi-creator-viewport-height="500">

    <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
        {
        "color": "rgba(30, 30, 30, 1)"
        }
    </script>

    <!-- Ana Container -->
    <div id="MainContainer_2" data-tchmi-type="TcHmi.Controls.System.TcHmiContainer" data-tchmi-left="10" data-tchmi-left-unit="px" data-tchmi-top="10" data-tchmi-top-unit="px" data-tchmi-right="10" data-tchmi-bottom="10">

        <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
            {
            "color": "rgba(45, 45, 45, 1)"
            }
        </script>

        <script data-tchmi-target-attribute="data-tchmi-border-width" type="application/json">
            {
            "left": 2,
            "right": 2,
            "top": 2,
            "bottom": 2,
            "leftUnit": "px",
            "rightUnit": "px",
            "topUnit": "px",
            "bottomUnit": "px"
            }
        </script>

        <script data-tchmi-target-attribute="data-tchmi-border-color" type="application/json">
            {
            "color": "rgba(64, 64, 64, 1)"
            }
        </script>

        <script data-tchmi-target-attribute="data-tchmi-border-style" type="application/json">
            {
            "left": "Solid",
            "right": "Solid",
            "top": "Solid",
            "bottom": "Solid"
            }
        </script>

        <!-- Başlık -->
        <div id="TimerHeader_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="20" data-tchmi-left-unit="px" data-tchmi-text="⏱️ GERİ SAYIM TIMER" data-tchmi-top="20" data-tchmi-top-unit="px" data-tchmi-right="20" data-tchmi-height="50" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-horizontal-alignment="Center" data-tchmi-text-font-size="20" data-tchmi-text-font-weight="Bold">

            <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                {
                "color": "rgba(0, 212, 255, 1)"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                {
                "color": "rgba(26, 77, 92, 1)"
                }
            </script>
        </div>

        <!-- Zaman Girişi Bölümü -->
        <div id="TimeInputSection_2" data-tchmi-type="TcHmi.Controls.System.TcHmiContainer" data-tchmi-left="30" data-tchmi-left-unit="px" data-tchmi-top="90" data-tchmi-top-unit="px" data-tchmi-right="30" data-tchmi-height="80">

            <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                {
                "color": "rgba(54, 54, 54, 1)"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-width" type="application/json">
                {
                "left": 1,
                "right": 1,
                "top": 1,
                "bottom": 1,
                "leftUnit": "px",
                "rightUnit": "px",
                "topUnit": "px",
                "bottomUnit": "px"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-color" type="application/json">
                {
                "color": "rgba(80, 80, 80, 1)"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-style" type="application/json">
                {
                "left": "Solid",
                "right": "Solid",
                "top": "Solid",
                "bottom": "Solid"
                }
            </script>

            <!-- Zaman Girişi Label -->
            <div id="TimeInputLabel_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="20" data-tchmi-left-unit="px" data-tchmi-text="⏲️ Süre (Saniye):" data-tchmi-top="15" data-tchmi-top-unit="px" data-tchmi-width="150" data-tchmi-height="25" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-font-size="14" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(224, 224, 224, 1)"
                    }
                </script>
            </div>

            <!-- Zaman Girişi Input -->
            <div id="TimeSetInput_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiNumericInput" data-tchmi-left="180" data-tchmi-left-unit="px" data-tchmi-top="10" data-tchmi-top-unit="px" data-tchmi-width="120" data-tchmi-height="35" data-tchmi-auto-focus-out="true" data-tchmi-decimal-digits="0" data-tchmi-max-value="9999" data-tchmi-min-value="0" data-tchmi-reset-to-last-valid-value="true" data-tchmi-value="%s%PLC1.P_CountdownTimer.nSetTime|BindingMode=TwoWay%/s%" data-tchmi-value-horizontal-alignment="Center">

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(74, 74, 74, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(255, 255, 255, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-border-color" type="application/json">
                    {
                    "color": "rgba(102, 102, 102, 1)"
                    }
                </script>

                <!-- PLC bağlantısı -->
                <script data-tchmi-target-attribute="data-tchmi-value" type="application/json">
                    {
                    "symbol": "PLC1.MAIN.P_CountdownTimer.nSetTime"
                    }
                </script>
            </div>

            <!-- Saniye etiketi -->
            <div id="SecondsLabel_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="310" data-tchmi-left-unit="px" data-tchmi-text="sn" data-tchmi-top="15" data-tchmi-top-unit="px" data-tchmi-width="30" data-tchmi-height="25" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-font-size="14">

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(153, 153, 153, 1)"
                    }
                </script>
            </div>
        </div>

        <!-- Timer Display Bölümü -->
        <div id="TimerDisplaySection_4" data-tchmi-type="TcHmi.Controls.System.TcHmiContainer" data-tchmi-left="30" data-tchmi-left-unit="px" data-tchmi-top="190" data-tchmi-top-unit="px" data-tchmi-right="30" data-tchmi-height="100">

            <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                {
                "color": "rgba(54, 54, 54, 1)"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-width" type="application/json">
                {
                "left": 2,
                "right": 2,
                "top": 2,
                "bottom": 2,
                "leftUnit": "px",
                "rightUnit": "px",
                "topUnit": "px",
                "bottomUnit": "px"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-color" type="application/json">
                {
                "color": "rgba(0, 212, 255, 1)"
                }
            </script>

            <script data-tchmi-target-attribute="data-tchmi-border-style" type="application/json">
                {
                "left": "Solid",
                "right": "Solid",
                "top": "Solid",
                "bottom": "Solid"
                }
            </script>

            <!-- Kalan Süre Display -->
            <div id="RemainingTimeDisplay_4" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="20" data-tchmi-left-unit="px" data-tchmi-text="%s%PLC1.P_CountdownTimer.nRemainingTime%/s%" data-tchmi-top="20" data-tchmi-top-unit="px" data-tchmi-right="20" data-tchmi-bottom="20" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-horizontal-alignment="Center" data-tchmi-text-font-size="48" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(0, 255, 136, 1)"
                    }
                </script>

                <!-- PLC'den kalan süreyi al ve formatla -->
                <script data-tchmi-target-attribute="data-tchmi-text" type="application/json">
                    {
                    "symbol": "PLC1.MAIN.P_CountdownTimer.nRemainingTime",
                    "formatter": {
                    "objectType": "FormatterProject",
                    "name": "SecondsToMinutesSeconds"
                    }
                    }
                </script>
            </div>
        </div>

        <!-- Kontrol Butonları -->
        <div id="ControlButtonsSection_2" data-tchmi-type="TcHmi.Controls.System.TcHmiGrid" data-tchmi-left="50" data-tchmi-left-unit="px" data-tchmi-top="310" data-tchmi-top-unit="px" data-tchmi-right="50" data-tchmi-height="60">

            <script data-tchmi-target-attribute="data-tchmi-column-options" type="application/json">
                [
                {
                "width": 1.0,
                "widthUnit": "factor",
                "widthMode": "Value",
                "maxWidthUnit": "px",
                "minWidthUnit": "px",
                "overflow": false
                },
                {
                "width": 1.0,
                "widthUnit": "factor",
                "widthMode": "Value",
                "maxWidthUnit": "px",
                "minWidthUnit": "px",
                "overflow": false
                },
                {
                "width": 1.0,
                "widthUnit": "factor",
                "widthMode": "Value",
                "maxWidthUnit": "px",
                "minWidthUnit": "px",
                "overflow": false
                }
                ]
            </script>

            <!-- Start Button -->
            <div data-tchmi-grid-column-index="0" id="StartButton_4" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiButton" data-tchmi-left="5" data-tchmi-left-unit="px" data-tchmi-text="▶️ BAŞLAT" data-tchmi-top="10" data-tchmi-top-unit="px" data-tchmi-right="5" data-tchmi-bottom="10" data-tchmi-text-font-size="14" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(56, 142, 60, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(255, 255, 255, 1)"
                    }
                </script>

                <!-- PLC'deki start sinyaline bağla -->
                <script data-tchmi-target-attribute="data-tchmi-trigger" type="application/json">
[
  {
    "event": "StartButton_4.onPressed",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "%s%PLC1.P_CountdownTimer.bStart%/s%",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/BOOL",
          "value": true
        },
        "asyncWait": true
      }
    ]
  },
  {
    "event": "StartButton_4.onReleased",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "PLC1.MAIN.P_CountdownTimer.bStart",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/Boolean",
          "value": false
        },
        "asyncWait": true
      }
    ]
  }
]
</script>
            </div>

            <!-- Stop Button -->
            <div data-tchmi-grid-column-index="1" id="StopButton_4" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiButton" data-tchmi-left="5" data-tchmi-left-unit="px" data-tchmi-text="⏸️ DURDUR" data-tchmi-top="10" data-tchmi-top-unit="px" data-tchmi-right="5" data-tchmi-bottom="10" data-tchmi-text-font-size="14" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(255, 152, 0, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(255, 255, 255, 1)"
                    }
                </script>

                <!-- PLC'deki stop sinyaline bağla -->
                <script data-tchmi-target-attribute="data-tchmi-trigger" type="application/json">
[
  {
    "event": "StopButton_4.onPressed",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "%s%PLC1.P_CountdownTimer.bStop%/s%",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/BOOL",
          "value": true
        },
        "asyncWait": true
      }
    ]
  },
  {
    "event": "StopButton_4.onReleased",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "PLC1.MAIN.P_CountdownTimer.bStop",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/Boolean",
          "value": false
        },
        "asyncWait": true
      }
    ]
  }
]
</script>
            </div>

            <!-- Reset Button -->
            <div data-tchmi-grid-column-index="2" id="ResetButton_4" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiButton" data-tchmi-left="5" data-tchmi-left-unit="px" data-tchmi-text="🔄 SIFIRLA" data-tchmi-top="10" data-tchmi-top-unit="px" data-tchmi-right="5" data-tchmi-bottom="10" data-tchmi-text-font-size="14" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(211, 47, 47, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(255, 255, 255, 1)"
                    }
                </script>

                <!-- PLC'deki reset sinyaline bağla -->
                <script data-tchmi-target-attribute="data-tchmi-trigger" type="application/json">
[
  {
    "event": "ResetButton_4.onPressed",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "%s%PLC1.P_CountdownTimer.bReset%/s%",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/BOOL",
          "value": true
        },
        "asyncWait": true
      }
    ]
  },
  {
    "event": "ResetButton_4.onReleased",
    "actions": [
      {
        "objectType": "WriteToSymbol",
        "active": true,
        "symbolExpression": "PLC1.MAIN.P_CountdownTimer.bReset",
        "value": {
          "objectType": "StaticValue",
          "valueType": "tchmi:general#/definitions/Boolean",
          "value": false
        },
        "asyncWait": true
      }
    ]
  }
]
</script>
            </div>
        </div>

        <!-- Status Indicators -->
        <div id="StatusSection_2" data-tchmi-type="TcHmi.Controls.System.TcHmiGrid" data-tchmi-left="80" data-tchmi-left-unit="px" data-tchmi-top="390" data-tchmi-top-unit="px" data-tchmi-right="80" data-tchmi-height="40">

            <script data-tchmi-target-attribute="data-tchmi-column-options" type="application/json">
                [
                {
                "width": 1.0,
                "widthUnit": "factor",
                "widthMode": "Value",
                "maxWidthUnit": "px",
                "minWidthUnit": "px",
                "overflow": false
                },
                {
                "width": 1.0,
                "widthUnit": "factor",
                "widthMode": "Value",
                "maxWidthUnit": "px",
                "minWidthUnit": "px",
                "overflow": false
                }
                ]
            </script>

            <!-- Running Status -->
            <div data-tchmi-grid-column-index="0" id="RunningStatus_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="5" data-tchmi-left-unit="px" data-tchmi-text="🟢 ÇALIŞIYOR" data-tchmi-top="5" data-tchmi-top-unit="px" data-tchmi-right="5" data-tchmi-bottom="5" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-horizontal-alignment="Center" data-tchmi-text-font-size="12" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(0, 255, 136, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(26, 77, 48, 1)"
                    }
                </script>

                <!-- Timer çalışma durumuna göre görünürlük -->
                <script data-tchmi-target-attribute="data-tchmi-visibility" type="application/json">
                    {
                    "symbol": "PLC1.MAIN.P_CountdownTimer.bTimerRunning",
                    "converter": {
                    "objectType": "ConverterProject",
                    "name": "BooleanToVisibility"
                    }
                    }
                </script>
            </div>

            <!-- Finished Status -->
            <div data-tchmi-grid-column-index="1" id="FinishedStatus_2" data-tchmi-type="TcHmi.Controls.Beckhoff.TcHmiTextblock" data-tchmi-left="5" data-tchmi-left-unit="px" data-tchmi-text="🔴 BİTTİ!" data-tchmi-top="5" data-tchmi-top-unit="px" data-tchmi-right="5" data-tchmi-bottom="5" data-tchmi-text-vertical-alignment="Center" data-tchmi-text-horizontal-alignment="Center" data-tchmi-text-font-size="12" data-tchmi-text-font-weight="Bold">

                <script data-tchmi-target-attribute="data-tchmi-text-color" type="application/json">
                    {
                    "color": "rgba(255, 82, 82, 1)"
                    }
                </script>

                <script data-tchmi-target-attribute="data-tchmi-background-color" type="application/json">
                    {
                    "color": "rgba(77, 26, 26, 1)"
                    }
                </script>

                <!-- Timer bitme durumuna göre görünürlük -->
                <script data-tchmi-target-attribute="data-tchmi-visibility" type="application/json">
                    {
                    "symbol": "PLC1.MAIN.P_CountdownTimer.bTimerFinished",
                    "converter": {
                    "objectType": "ConverterProject",
                    "name": "BooleanToVisibility"
                    }
                    }
                </script>
            </div>
        </div>
    </div>
</div>